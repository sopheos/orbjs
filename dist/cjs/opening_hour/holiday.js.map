{"version":3,"sources":["../../../src/opening_hour/holiday.ts"],"names":["Holiday","year","paque","getPaque","datePaque","lundiDePaque","addDay","ascension","pentecote","vendrediSt","nouvelleAn","feteDutravail","victoire","national","assomption","toussaint","armistice","noel","stEtienne","admins","n","c","Math","trunc","u","s","t","p","q","e","b","d","l","h","m","j","day","date","newDate","Date","setDate","getDate","daydate","getMonth"],"mappings":"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","sourcesContent":["export class Holiday {\n\n  private paque = '';\n  private lundiDePaque = '';\n  private ascension = '';\n  private pentecote = '';\n  private vendrediSt = '';\n  private nouvelleAn = '01-01';\n  private feteDutravail = '05-01';\n  private victoire = '05-08';\n  private national = '07-14';\n  private assomption = '08-15';\n  private toussaint = '11-01';\n  private armistice = '11-11';\n  private noel = '12-25';\n  private stEtienne = '12-26';\n\n  private admins = ['FR-57',  'FR-67', 'FR-68'];\n\n  constructor(year: number) {\n    this.paque = this.getPaque(year);\n    const datePaque = `${year}-${this.paque}`;\n    this.lundiDePaque = this.addDay(datePaque, 1);\n    this.ascension = this.addDay(datePaque, 39);\n    this.pentecote = this.addDay(datePaque, 50);\n    this.vendrediSt = this.addDay(datePaque, -2);\n  }\n\n  /**\n   * @returns {Array<String>} Liste de jours fériés français\n   */\n  getHoliday(): Array<string> {\n    return [\n      this.paque,\n      this.lundiDePaque,\n      this.ascension,\n      this.pentecote,\n      this.nouvelleAn,\n      this.feteDutravail,\n      this.victoire,\n      this.national,\n      this.assomption,\n      this.toussaint,\n      this.armistice,\n      this.noel\n    ];\n  }\n\n  /**\n   * @returns {Array<String>} Liste de jours fériés spécifiques à des départements\n   */\n  getOtherHoliday(): Array<string> {\n    return [\n      this.vendrediSt,\n      this.stEtienne\n    ];\n  }\n\n  /**\n   * @returns {Array<String>} Liste des départements ayant des jours fériés en plus\n   */\n  getAdmins(): Array<string> {\n    return this.admins;\n  }\n\n  /**\n   * Calcul la date de Pâque à une année donné\n   * https://fr.wikipedia.org/wiki/Calcul_de_la_date_de_P%C3%A2ques\n   * @param {number} year\n   * @returns {string} La date de Pâque au format MM-DD\n   */\n  getPaque(year: number): string {\n    const n = year % 19;\n    const c = Math.trunc(year / 100);\n    const u = year % 100;\n    const s = Math.trunc(c / 4);\n    const t = c % 4;\n    const p = Math.trunc((c + 8) / 25);\n    const q = Math.trunc((c - p + 1) / 3);\n    const e = (19 * n + c - s - q + 15) % 30;\n    const b = Math.trunc(u / 4);\n    const d = u % 4;\n    const l = (2 * t + 2 * b - e - d + 32) % 7;\n    const h = Math.trunc((n + 11 * e + 22 * l) / 451);\n    const m = Math.trunc((e + l - 7 * h + 114) / 31);\n    const j = ((e + l - 7 * h + 114) % 31) + 1;\n\n    const day = j < 10 ? `0${j}` : j;\n    return `0${m}-${day}`;\n  }\n\n  /**\n   * Incrémente une date\n   * @param {string} date\n   * @param {number} day Nombre de jour à ajouter\n   * @returns {string} La nouvelle date au format MM-DD\n   */\n  addDay(date: string, day: number): string {\n    const newDate = new Date(date);\n    newDate.setDate(newDate.getDate() + day);\n    const daydate = newDate.getDate() < 10 ? `0${newDate.getDate()}` : newDate.getDate();\n    return `0${newDate.getMonth() + 1}-${daydate}`;\n  }\n\n}\n"],"file":"holiday.js"}