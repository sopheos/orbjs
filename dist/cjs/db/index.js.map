{"version":3,"sources":["../../../src/db/index.ts"],"names":["DB","config","pool","mysql","createPool","sql","args","Promise","resolve","reject","getConnection","err","connection","query","rows","fields","release","end"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;;;;IAEaA,E;AAIT,cAAYC,MAAZ,EAAyB;AAAA;AAAA;AACrB,SAAKC,IAAL,GAAYC,KAAK,CAACC,UAAN,CAAiBH,MAAjB,CAAZ;AACH;;;;WAED,eAAaI,GAAb,EAA0BC,IAA1B,EAAwC;AAAA;;AACpC,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAEpC,QAAA,KAAI,CAACP,IAAL,CAAUQ,aAAV,CAAwB,UAACC,GAAD,EAAWC,UAAX,EAA+B;AACnD,cAAID,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN;AAETC,UAAAA,UAAU,CAACC,KAAX,CAAiBR,GAAjB,EAAsBC,IAAtB,EAA4B,UAACK,GAAD,EAAWG,IAAX,EAAsBC,MAAtB,EAAsC;AAC9DH,YAAAA,UAAU,CAACI,OAAX;AACAL,YAAAA,GAAG,GAAGF,MAAM,CAACE,GAAD,CAAT,GAAiBH,OAAO,CAAC;AAAEM,cAAAA,IAAI,EAAEA,IAAR;AAAcC,cAAAA,MAAM,EAAEA;AAAtB,aAAD,CAA3B;AACH,WAHD;AAKH,SARD;AASH,OAXM,CAAP;AAYH;;;WAED,eAA4B;AAAA;;AACxB,aAAO,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,QAAA,MAAI,CAACP,IAAL,CAAUe,GAAV,CAAc,UAACN,GAAD,EAAc;AACxB,cAAIA,GAAJ,EAASF,MAAM,CAACE,GAAD,CAAN;AACTH,UAAAA,OAAO;AACV,SAHD;AAIH,OALM,CAAP;AAMH","sourcesContent":["import * as mysql from 'mysql';\n\nexport class DB {\n\n    private pool: any;\n\n    constructor(config: any) {\n        this.pool = mysql.createPool(config);\n    }\n\n    public query(sql: string, args?: any[]) {\n        return new Promise((resolve, reject) => {\n\n            this.pool.getConnection((err: any, connection: any) => {\n                if (err) reject(err);\n\n                connection.query(sql, args, (err: any, rows: any, fields: any) => {\n                    connection.release();\n                    err ? reject(err) : resolve({ rows: rows, fields: fields });\n                });\n\n            });\n        });\n    }\n\n    public end(): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.pool.end((err: any) => {\n                if (err) reject(err);\n                resolve();\n            });\n        });\n    }\n}\n"],"file":"index.js"}